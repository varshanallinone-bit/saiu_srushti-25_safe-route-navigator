<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Create Account</title>
<script src="https://cdn.tailwindcss.com"></script>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
body {
font-family: 'Inter', sans-serif;
background-color: #f3f4f6; /* Light gray background /
color: #1f2937; / Dark text for contrast /
}
.container-bg {
background-color: #ffffff; / White card background /
}
.input-field {
background-color: #f9fafb; / Lighter input background /
color: #1f2937; / Darker text /
}
.btn-primary {
background-color: #1e40af; / Blue button /
transition: background-color 0.3s ease;
}
.btn-primary:hover {
background-color: #1c3d8a; / Darker blue on hover */
}
.modal {
display: none;
position: fixed;
z-index: 100;
left: 0;
top: 0;
width: 100%;
height: 100%;
overflow: auto;
background-color: rgba(0, 0, 0, 0.4);
justify-content: center;
align-items: center;
}
.modal-content {
background-color: #fff;
padding: 2.5rem;
border-radius: 1.5rem;
text-align: center;
}
.modal-btn {
background-color: #1e40af;
color: #fff;
padding: 0.75rem 2rem;
border-radius: 9999px;
font-weight: bold;
transition: background-color 0.3s ease;
}
.modal-btn:hover {
background-color: #1c3d8a;
}
</style>
</head>
<body class="flex items-center justify-center min-h-screen px-4">
<div class="w-full max-w-sm p-6 sm:p-8 rounded-2xl shadow-2xl container-bg">
<div class="text-center mb-8">
<h1 class="text-3xl font-bold text-gray-800 mb-2">Create Account</h1>
<p class="text-gray-600">Join us to stay safe on the road.</p>
</div>

    <form id="register-form">
        <div class="mb-4">
            <label for="email" class="block text-sm font-medium text-gray-700 mb-2">Email</label>
            <input type="email" id="email" class="w-full p-3 rounded-lg border border-gray-300 focus:outline-none focus:border-indigo-500 input-field" placeholder="e.g., username@example.com" required>
        </div>

        <div class="mb-4">
            <label for="password" class="block text-sm font-medium text-gray-700 mb-2">Create Password</label>
            <input type="password" id="password" class="w-full p-3 rounded-lg border border-gray-300 focus:outline-none focus:border-indigo-500 input-field" placeholder="Enter a new password" required>
        </div>

        <div class="mb-6">
            <label for="confirm-password" class="block text-sm font-medium text-gray-700 mb-2">Confirm Password</label>
            <input type="password" id="confirm-password" class="w-full p-3 rounded-lg border border-gray-300 focus:outline-none focus:border-indigo-500 input-field" placeholder="Confirm your password" required>
        </div>

        <button type="submit" class="w-full py-3 rounded-lg font-bold text-lg text-white bg-indigo-600 hover:bg-indigo-700">
            Create Account
        </button>
        <p id="register-message" class="mt-4 text-center text-sm"></p>
    </form>

    <p class="mt-8 text-center text-gray-600">
        Already have an account?
        <a href="/login" class="text-indigo-600 hover:underline font-medium">Log in</a>
    </p>
</div>

<!-- Registration Success Modal -->
<div id="success-modal" class="modal">
    <div class="modal-content">
        <h3 class="text-2xl font-bold mb-4">Account Created!</h3>
        <p class="text-gray-600 mb-8">Your account has been successfully created. You can now log in.</p>
        <a href="/login" class="modal-btn">Go to Login</a>
    </div>
</div>

<script>
    const API_URL = "http://127.0.0.1:5000";

    document.getElementById('register-form').addEventListener('submit', async (e) => {
        e.preventDefault();
        const email = document.getElementById('email').value;
        const password = document.getElementById('password').value;
        const confirmPassword = document.getElementById('confirm-password').value;
        const registerMessage = document.getElementById('register-message');
        const modal = document.getElementById('success-modal');

        if (password !== confirmPassword) {
            registerMessage.textContent = 'Error: Passwords do not match.';
            registerMessage.className = "mt-4 text-center text-sm text-red-600";
            return;
        }

        try {
            const response = await fetch(`${API_URL}/register`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ email, password })
            });

            const data = await response.json();
            if (response.ok) {
                registerMessage.textContent = '';
                modal.style.display = 'flex';
            } else {
                registerMessage.textContent = data.error;
                registerMessage.className = "mt-4 text-center text-sm text-red-600";
            }
        } catch (error) {
            registerMessage.textContent = "Could not connect to the server. Is it running?";
            registerMessage.className = "mt-4 text-center text-sm text-red-600";
        }
    });
</script>

</body>
</html>